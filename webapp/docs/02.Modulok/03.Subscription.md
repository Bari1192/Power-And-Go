# Subscription

A **Subscription modul** felelős az előfizetési csomagok kezeléséért, ideértve az előfizetések létrehozását, frissítését, törlését és megjelenítését. Az előfizetések különböző szinteket és díjstruktúrákat tartalmaznak, amelyek a felhasználói igényekhez igazíthatók.

---

- Az előfizetés **nevét** (pl. `Power`, `Power-Plus`, `Power-Premium`, `Power-VIP`),
- Az előfizetéshez tartozó **havi díjat**,
- Az előfizetéshez tartozó **éves díjat**.

A Subscription modul `kapcsolódik` a **Users** modulhoz, biztosítva, hogy minden felhasználó rendelkezzen egy hozzárendelt előfizetéssel. Az előfizetések különböző szinteket és szolgáltatásokat biztosítanak, amelyek havi vagy éves díjakkal kezelhetők.

---
## **Migráció** | Tábla

- **Subscriptions**
  - `id`: Elsődleges kulcs.
  - `sub_name`: Előfizetési csomag neve (max. 50 karakter, egyedi értékek).
  - `sub_monthly`: Havi díj (opcionális).
  - `sub_annual`: Éves díj (opcionális).
  - `created_at`: Rekord létrehozási időpontja.
  - `updated_at`: Rekord utolsó frissítési időpontja.

---

## Subscription Modell

- **Főbb attribútumok**:
  - `protected $fillable`:
    - `sub_name`, `sub_monthly`, `sub_annual`.
- **Relációk / kapcsolatok**:
  - `user`: **Egy** előfizetési csomag **több felhasználóhoz** kapcsolódik (`HasMany` kapcsolat).
---

## Seeder

- **Reprezentatív létrehozott adatok**:

  ```json
  [
    {
      "sub_name": "Power",
      "sub_monthly": null,
      "sub_annual": null
    },
    {
      "sub_name": "Power-Plus",
      "sub_monthly": 490,
      "sub_annual": null
    },
  ]
  ```

## API Végpontok

1. **GET** `/api/subscriptions`

   - **Leírás**: Az összes előfizetés adatainak lekérése.
   - **Controller metódus**: `SubscriptionController@index`
   - **Válasz _reprezentatív_ eredménye**:

     ```json
     [
       {
         "sub_id": 1,
         "sub_name": "Power",
         "sub_monthly": null,
         "sub_annual": null
       },
       {
         "sub_id": 2,
         "sub_name": "Power-Plus",
         "sub_monthly": 490,
         "sub_annual": null
       }
     ]
     ```

2. **POST** `/api/subscriptions`

   - **Leírás**: Új előfizetési csomag létrehozása.
   - **Validáció**: `StoreSubscriptionRequest` fájl végzi.
   - **Példa _reprezentatív_ adatbeszúrás eredménye**:
     ```json
     {
       "sub_name": "Power-Premium",
       "sub_monthly": 1690,
       "sub_annual": null
     }
     ```

3. **PUT** `/api/subscriptions/{id}`

   - **Leírás**: Létező előfizetés frissítése.
   - **Validáció**: `UpdateSubscriptionRequest`.

4. **DELETE** `/api/subscriptions/{id}`

   - **Leírás**: Előfizetési csomag törlése.
   - **Validáció**: `SubscriptionController`-ben, amennyiben az adatrekord nem létezik, hibaüzenettel tér vissza.

---


## Validáció
### `StoreSubscriptionRequest`

- **Szabályok**:
  - `sub_name`: **Kötelező**, 2 és 30 közötti **karakter** hosszúságú szöveg.
  - `sub_monthly`: **Kötelező**, 0 és 10,000 közötti **egész** szám.
  - `sub_annual`: **Kötelező**, 0 és 10,000 közötti **egész** szám.

### `UpdateSubscriptionRequest`

- **Szabályok**:
  - `sub_name`: **Kötelező**, léteznie kell a `subscriptions` táblában.
  - `sub_monthly`: Nem kötelező, 0 és 10,000 közötti **egész** szám.
  - `sub_annual`: Nem kötelező, 0 és 10,000 közötti **egész** szám.

---